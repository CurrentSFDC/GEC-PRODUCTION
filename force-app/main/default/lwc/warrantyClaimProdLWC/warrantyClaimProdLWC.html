<template>
    <div class="slds-box">
        <!--<div class="slds-text-title_caps">Order Selection</div>--> <br>
        <div class="slds-grid slds-gutters slds-wrap">
                <div class="slds-col slds-size_1-of-1 slds-medium-size_4-of-8 slds-large-size_4-of-8">
                    <h3 class="slds-section-title--divider">{searchLabel}</h3>
                    <div class="slds-box slds-theme_shade border">
                        
                        <!-- <div class="slds-grid slds-gutters slds-wrap"> -->

                            <!--<div if:true={showDistroField}>
                                <div class="slds-grid slds-gutters slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_2-of-4">

                                <c-distributor-search-custom  required object-api-name="account" icon-name="standard:account"  
                                     filter-field-name = "Z001" filter-field-val ={agentNumber}  variant="label-hidden" onrecordselection={confirmchange}></c-distributor-search-custom >                                  
                            
                                    </div>
                                    </div>
                            </div>
                            <br>-->
                            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_2-of-4">
                                <lightning-button icon-name="utility:edit_form" label="Manual Entry" onclick={openNoCatModal}></lightning-button><br>
                                <h5>Helpful Tip: <lightning-helptext content="If unable to find your Order, click on Manual Entry above to add products manually to Service Request"></lightning-helptext> 
                                </h5>
                            </div>
                           
                                <div if:true={searchOrders}>
                                    <div class="slds-grid slds-gutters slds-wrap">
                                        
                                              
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_2-of-4 mb-mr-t10 mb-br-top">
                                            
                                            
                                                                                
                                                <!--lightning-input-field field-name='Order_Name__c' onchange={handleChange} value={paramString}></lightning-input-field-->
                                                <c-order-search-custom  required object-api-name="order" icon-name="standard:form"  
                                                filter-field-name ={soldToAccount} filter-field-val ={disAccount}  variant="label-hidden" onorderselection={handleChange} value={paramString}></c-order-search-custom > 
                                                <h5>Search by Current Order # or Customer PO#</h5>
                                                
                                                <!--<div class="slds-m-top_medium">
                                                <lightning-button variant="brand" type="submit" name="save" label="Create Case"></lightning-button>
                                                </div>-->  
                                                
                                        </div>
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_2-of-4">

                                            <c-distributor-search-custom  required object-api-name="account" icon-name="standard:account"  
                                                 filter-field-name = "Z001" filter-field-val ={agentNumber}  variant="label-hidden" onrecordselection={confirmchange}></c-distributor-search-custom >                                  
                                        
                                                </div>
                                    </div>
                                    <!--<div class="slds-grid slds-gutters">
                                        <div class="slds-col slds-size_2-of-4">
                                            <h5>Helpful Tip: <lightning-helptext content="If unable to find your Order, click on Manual Entry above to add products manually to your claim"></lightning-helptext> 
                                            </h5>
                                        </div>
                                    </div> -->
                                </div>

                                <div if:false={searchOrders}>
                                    <div class="slds-grid slds-gutters slds-wrap">
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_2-of-4"> 
                                            <lightning-button icon-name="utility:search" label="Search by Order" onclick={showOrder}></lightning-button>
                                        </div>
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_2-of-4 slds-border_left mb-br-top mb-mr-t10"> 
                                            <!-- <c-lwc-lookup objectname="GE_LGT_EM_MaterialMaster__c" fieldname="GE_LGT_EM_SAP_MaterialNumber__c" numrecords="10" iconname="standard:account" lookupstyle = "width : 100%;" onselected={accountID}> </c-lwc-lookup> -->
                                            <div class="mb-mr-t10">
                                            <h4>Click on Add Product button below to manually <br> add Products to your Claim.</h4>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            

                            
            
                            
                        <!-- </div> -->
                    </div>
                </div> 
                
                <div class="slds-col slds-size_1-of-1 slds-medium-size_4-of-8 slds-large-size_4-of-8 mb-mr-t18">
                    <!--<div if:true={searchOrders}>-->
                        <h3 class="slds-section-title--divider">Cart Information</h3>
                        <div class="slds-box slds-theme_shade border">
                            <div class="slds-grid slds-gutters slds-wrap">
                                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-3">
                                    <lightning-button-group>
                                <!---   <lightning-button icon-name="utility:cart" label="Add to Cart" onclick={handleClick}></lightning-button>-->
                                        <lightning-button icon-name="utility:preview" label="View Cart" onclick={showCart}></lightning-button>
                                        <!--<lightning-button icon-name="utility:clock" label="Save Cart" onclick={saveCart}></lightning-button>-->
                                    </lightning-button-group> 
                                </div>   
                                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-3 slds-border_left mb-br-top ip-br-top mb-mr-t10 ip-mr-t10">
                                    <div class="items mb-items"><lightning-icon icon-name="utility:cart" alternative-text="Cart" size="x-medium" variant="brand"
                                        title="x-small size"></lightning-icon>&nbsp; <text class="cartNumber">{cartCount}</text> &nbsp; Items in Cart </div>
                                </div>
                                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-3 slds-border_left mb-br-top ip-br-top mb-mr-t10 ip-mr-t10">
                                    <h4 class="mb-items">Transaction ID: <br>{transactionID}</h4>
                                </div>
                            </div>
                        </div>
                    <!--</div>-->
                </div> 
           
        </div><br>
        
        <div if:true={isOrderIdAvailable}>
            
            <div class="slds-col slds-size_8-of-8">
                <h3 class="slds-section-title--divider">Product Selection</h3> 
                <div class="slds-box slds-theme_shade border orderProducts">
                    
                    <template if:true={orderItemList}>
                        <lightning-datatable hide-checkbox-column data={orderItemList} columns={columns} key-field="Id" draft-values={draftValues} onsave={handleSave} onrowselection={handleSelect} onrowaction={handleRowActions} suppress-bottom-bar="true">
                        </lightning-datatable>
                        
                    </template>
                    <template if:true={error}>
                        {error}
                    </template>

                    <!--<template if:true={flagIndi}>
                    <c-confirmation-details item={valuetopass}> 
                    </c-confirmation-details>
                    </template>-->
        
                </div>
            </div>
            
        </div>

       <!--<div if:true={warrantyEntry} class="mb-mr-t-18">
           
            <c-warranty-claim-manual-entry-l-w-c onmanuallineupdate={setManualLines} transaction-id={transactionID} object-api-name='Return_Order_Item__c' column-list={warrantyColumns} title='Add Catalog # Manually'>
            </c-warranty-claim-manual-entry-l-w-c> 
            <br/>
        </div> -->

    </div>



            <!-- MODAL FOR SHOWING THE CART-->
                <!-- Detail view modal start -->
                    <template if:true={bShowModal}>
                        <section role="dialog" tabindex="-1"
                                aria-labelledby="modal-heading-01"
                                aria-modal="true"
                                aria-describedby="modal-content-id-1"
                                class="slds-modal slds-fade-in-open slds-modal_medium">
                        <div class="slds-modal__container">
                            <!-- modal header start -->
                            <header class="slds-modal__header">
                                <!--<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                                    <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                                </button>-->
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Cart Details</h2>
                                Transaction ID: {transactionID}
                            </header>
                            <!-- modal body start -->
                            <div class="slds-theme_default">
                                    
                                    <lightning-card title="Your Cart" >
                                        <div if:true={storedLines} >
                                        <div style="height: 180px;">
                                            <lightning-datatable 
                                                key-field="id"
                                                data={storedLines}
                                                columns={cartColumns}
                                                onrowaction={cartActions} 
                                                hide-checkbox-column="true">
                                            </lightning-datatable>
                                        </div>
                                        </div>
                                        <div if:false={storedLines}>
                                            <div class="items">No Items In Your Cart</div>
                                        </div>
                                        <!-- <div class="slds-m-around_medium">
                                            <p class="slds-m-vertical_medium content">
                                                    Displaying {startingRecord} to {endingRecord} of {totalRecountCount} records.
                                                    Page {page} of {totalPage}. </p>
                                            <c-paginator onprevious={previousHandler} onnext={nextHandler}></c-paginator>
                                        </div> -->
                                    
                                    </lightning-card>
                            </div>
                                
                            <!-- modal footer start-->
                            <footer class="slds-modal__footer">
                                <lightning-button variant="brand"
                                label="Close"
                                title="Close"
                                onclick={closeModal}
                                ></lightning-button>
                            </footer>
                        </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>
                    <!-- Detail view modal end -->

                    <!--END SHOW CART MODAL-->


                      <!-- Detail view modal -->
                      <template if:true={bShowModal1}>
                        <section role="dialog" tabindex="-1"
                                aria-labelledby="modal-heading-01"
                                aria-modal="true"
                                aria-describedby="modal-content-id-1"
                                class="slds-modal slds-fade-in-open">
                        <div class="slds-modal__container">
                            <!-- modal header -->
                            <header class="slds-modal__header">
                                <!--<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal1}>
                                    <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                                </button>-->
                                
                                <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate" if:false={isEditForm}>Record Detail</h2>
                                <h2 id="modal-heading-03" class="slds-text-heading_medium slds-hyphenate" if:true={isEditForm}>Add to Warranty Claim</h2>
                                <p class="error">{errorMessage}</p>
                            </header>
                            <!-- modal body -->
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" if:false={isEditForm}>
                                <dl class="slds-list_horizontal slds-wrap">
                                    <dt class="slds-item_label slds-truncate" title="Installed_Qty__c">Installed_Qty__c:</dt>
                                    <dd class="slds-item_detail slds-truncate">{record.Installed_Qty__c}</dd>
                                    <dt class="slds-item_label slds-truncate" title="No_Of_Products_Failed__c">No_Of_Products_Failed__c:</dt>
                                    <dd class="slds-item_detail slds-truncate">{record.No_Of_Products_Failed__c}</dd>
                                    <dt class="slds-item_label slds-truncate" title="Date_Installed__c">Date_Installed__c:</dt>
                                    <dd class="slds-item_detail slds-truncate">{record.Date_Installed__c}</dd>
                                    <dt class="slds-item_label slds-truncate" title="Requested_Action_Override__c">Requested_Action_Override__c</dt>
                                    <dd class="slds-item_detail slds-truncate">{record.Requested_Action_Override__c}</dd>
                                    <dt class="slds-item_label slds-truncate" title="Id">Id</dt>
                                    <dd class="slds-item_detail slds-truncate">{record.Id}</dd>
                                </dl>
                            </div>
                            <!--START OF NEW MODAL CONTENT BOX-->

                            <!-- showing record edit form -->
                            <div if:true={isEditForm} class="slds-theme_default">
                                <lightning-record-edit-form layout-type="Full" record-id={currentRecordId} draft-values={draftValues} object-api-name="OrderItem" onsubmit={handleSubmit} onsuccess={handleSuccess}>
                <lightning-messages></lightning-messages>
                <div class="slds-modal__content slds-p-around_medium">
                    <template if:true={isLoading}>
                        <lightning-spinner class="spins" alternative-text="Loading" variant="brand"></lightning-spinner>
                    </template>
                        <div class="slds-box"> <!-- BOX 1 UPPER-->
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <div class="slds-col slds-size_3-of-6">
                                        <label class="slds-form-element__label" for="form-element-01">Catalog #</label>
                                        <lightning-output-field variant="label-hidden" field-name="SKU_Description_Cat_Logic__c"></lightning-output-field>
                                        <label class="slds-form-element__label" for="form-element-01">SKU</label>
                                        <lightning-output-field variant="label-hidden" field-name="SKU__c"></lightning-output-field>
                                        <lightning-output-field field-name="Quantity"></lightning-output-field>
                                        <lightning-output-field field-name="PO__c"></lightning-output-field>
                                        <lightning-output-field field-name="Shipment_Date__c"></lightning-output-field>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_3-of-6">
                                    <!--<lightning-input-field field-name="Distributor_Name__c" value={disName} readonly=true></lightning-input-field>-->
                                    <lightning-combobox
                                        name="action"
                                        field-name="Requested_Action_Override__c"
                                        label="Requested Action - Line Item Override"
                                        placeholder="Select Action"
                                        options={RAoptions}
                                        value={reqAction}
                                        onchange={handleRAction}
                                        
                                        class="ra validValue"></lightning-combobox>
                                    <lightning-combobox
                                        name="progress"
                                        field-name="Warranty_Code__c"
                                        label="Warranty Code - Line Item Override"
                                        value={warCode}
                                        placeholder="Select Warranty Code"
                                        options={warOptions}
                                        onchange={handlePick}
                                        
                                        class="wc validValue"></lightning-combobox>
                                    <lightning-combobox
                                        name="progress"
                                        field-name="Warranty_Sub_Code__c"
                                        label="Warranty Sub Code - Line Item Override"
                                        value={warSubCode}
                                        placeholder="Select Warranty Sub Code"
                                        options={warSubOptions}
                                        
                                        class="wsc validValue"></lightning-combobox>
                                    
                                </div>
                            </div>
                        </div>
                        
                        <div class="slds-box"> <!-- BOX 2 LOWER-->
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <lightning-input
                                        field-name="Date_Installed__c" 
                                        label="Date Installed"
                                        value={dateInstalled}
                                        type="date"
                                        date-style="short" 
                                        required 
                                        class="di validValue"></lightning-input>
                                        <lightning-textarea 
                                        name="comments"
                                        field-name="Comments__c"
                                        value={comments} 
                                        label="Comments" 
                                        placeholder="type here..."
                                        class="cm"></lightning-textarea>

                                        
                                        <!--<template if:true={paPrice}>
                                            <lightning-input
                                                field-name="Price_Agreement_Price__c" 
                                                label="Price Agreement Price"
                                                value={priceAgrmtPrice}
                                                type="currency" 
                                                required 
                                                class="pa"></lightning-input>
                                        </template>-->
                                </div>
    
                                <div class="slds-col">
                                    <lightning-input
                                        field-name="Installed_Qty__c" 
                                        label="Installed Qty"
                                        onchange={handleValueChange}
                                        
                                        type="number"
                                        required 
                                        class="iq validValue"></lightning-input>
                                        <lightning-input
                                        field-name="No_of_Products_Failed__c" 
                                        label="No. of Products Failed"
                                        onchange={handleFailedValueChange}
                                        
                                        type="number" 
                                        required 
                                        class="nf validValue"></lightning-input>
                                        <!--<lightning-input
                                        field-name="No_of_Hours_Used__c" 
                                        label="No. of Hours Used"
                                        value={hoursUsed}
                                        type="number" 
                                        required 
                                        class="hu validValue"></lightning-input>
                                        <lightning-input 
                                        field-name="Hours_per_Start__c"
                                        label="Hours Per Start"
                                        value={hoursPerStart}
                                        type="number" 
                                        required 
                                        class="hs validValue"></lightning-input>-->
    
                                </div>
                            </div>
                        </div>
                        <br>

                        <!--<div class="slds-box"> BOX 3 LOWER
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    
                                    <lightning-textarea 
                                        name="comments"
                                        field-name="Comments__c"
                                        value={comments} 
                                        label="Comments" 
                                        placeholder="type here..."
                                        class="cm"></lightning-textarea>
                                    
                                    <br>
                                    
                                </div>
                            </div>
                        </div>-->
                        <div class="slds-align_absolute-center">
                            <div style="text-align:center;">
                                <lightning-button variant="brand-outline"
                                    label="Close"
                                    title="Close"
                                    onclick={closeModal1}>
                                </lightning-button>
                                <lightning-button class="slds-m-top_small slds-p-left_x-small"
                                    variant="brand"
                                    type="submit"
                                    name="update"
                                    label={editLabel}>
                                </lightning-button>
                            </div>
                        </div>
                </div>
                </lightning-record-edit-form>
                </div>
                            <!-- modal footer start-->
                        
                        </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                       
                    </template>



                <!--MODAL FOR MANUAL/NOCAT# ENTRY-->

                        <!--<div class="slds-box">
                                <div class="slds-grid slds-gutters">
                                    <div class="slds-col slds-size_8-of-8">
                                        <lightning-button variant="brand" label="Add Product" onclick={addProduct}></lightning-button>
                                        
                                            <div class="slds-box slds-theme_shade border">
                                            
                                            <template if:true={isLoading}>
                                                <lightning-spinner alternative-text="Loading" variant="brand"></lightning-spinner>
                                            </template>
                    
                                        <template if:false={isLoading}>
                                            <div if:true={showReturnItems}>
                                            <template if:true={returnLines}>
                                            <lightning-datatable wrap-text-max-lines="2" data={returnLines} columns={columns} key-field="Id" onrowaction={handleRowAction} suppress-bottom-bar="true" hide-checkbox-column>
                                            </lightning-datatable>
                                            </template>
                                            </div>
                                        </template>
                                            
                    
                                        
                                        </div>
                                </div>
                            </div>
                        </div>-->
                    
                     <!--ADD PRODUCT MANUALLY MODAL-->
                            <!-- MODAL FOR ADDING PRODUCTS -->
                            <template if:true={noCatModal}>
                                
                                <section role="dialog" tabindex="-1"
                                        aria-labelledby="modal-heading-01"
                                        aria-modal="true"
                                        aria-describedby="modal-content-id-1"
                                        class="slds-modal slds-fade-in-open">
                                <div class="slds-modal__container">
                                    <!-- modal header -->
                                    <header class="slds-modal__header">
                                        <!--<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeAddModal}>
                                            <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                                        </button>-->
                                        <h2 id="modal-heading-04" class="slds-text-heading_medium slds-hyphenate">Add to Warranty Claim</h2>
                                        <p class="error">{errorMessage}</p>
                                    </header>
                                    <!-- modal body -->
                                   
                                    
                                    <!-- showing record edit form -->
                                    <lightning-messages></lightning-messages>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <template if:true={isLoading}>
                                            <lightning-spinner class="spins" alternative-text="Loading" variant="brand"></lightning-spinner>
                                        </template>
                                            <div class="slds-box"> <!-- BOX 1 UPPER-->
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col">
                                                        <h4><lightning-helptext content="Content for Text"></lightning-helptext></h4>
                                                        <lightning-input
                                                            label="NoCAT Input"
                                                            type="toggle"
                                                            message-toggle-active = ''
                                                            message-toggle-inactive = ''
                                                            onchange={handleNoCatChecked}
                                                            class="nci"
                                                            field-level-help="Enter required information"
                                                        ></lightning-input>
                                                        <div if:false={noCatInput}>
                                                            <c-material-lookup-l-w-c object-name="GE_LGT_EM_MaterialMaster__c" field-name="GE_LGT_EM_MaterialDescription__c" label="CAT#" placeholder="Search..." icon-name="standard:products" onselected={handleMaterialSelected} class="mat"></c-material-lookup-l-w-c> 
                                                            
                                                            
                                                            
                                                            <!--<c-lookup-l-w-c unique-key="Id" obj-name="GE_LGT_EM_MaterialMaster__c" icon-name="standard:products" label-name="Material Master"
                                                                display-fields="GE_LGT_EM_SAP_MaterialNumber__c, GE_LGT_EM_MaterialDescription__c" display-format="GE_LGT_EM_SAP_MaterialNumber__c - GE_LGT_EM_MaterialDescription__c"
                                                                onvalueselect={handleSelection} placeholder="Search" value-id="" create-record="false"  class="custom-lookup">
                                                            </c-lookup-l-w-c>-->
                                                            <!--<div class="slds-box">
                                                                Selected Material ID: {materialDescription}
                                                                
                                                            </div> -->
                                                        </div>
                                                        <div if:true={noCatInput}>
                                                            <lightning-input
                                                                label="NoCAT #"
                                                                type="text"
                                                                value={NoCAT}
                                                                class="nc"
                                                                onchange={onNoCatChange}
                                                            ></lightning-input>
                                                        </div>
                                                    </div>
                                                    <div class="slds-col">
                                                        <lightning-combobox
                                                            name="action"
                                                            label="Requested Action - Line Item Override"
                                                            placeholder="Select Action"
                                                            options={RAoptions}
                                                            onchange={handleManualRAction}
                                                            class="ra"></lightning-combobox>
                                                        <lightning-combobox
                                                            name="progress"
                                                            label="Warranty Code - Line Item Override"
                                                            placeholder="Select Warranty Code"
                                                            options={warOptions}
                                                            onchange={handleManualPick}
                                                            class="wc"></lightning-combobox>
                                                        <lightning-combobox
                                                            name="progress"
                                                            label="Warranty Sub Code - Line Item Override"
                                                            placeholder="Select Warranty Sub Code"
                                                            options={warSubOptions}
                                                            class="wsc"></lightning-combobox>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="slds-box"> <!-- BOX 2 LOWER-->
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col">
                                                        <lightning-input 
                                                            label="Shipment Date"
                                                            type="date"
                                                            date-style="short" 
                                                            required 
                                                            class="sd validValue"></lightning-input>
                                                        <lightning-input 
                                                            label="Date Installed"
                                                            type="date"
                                                            date-style="short" 
                                                            required 
                                                            class="di validValue"></lightning-input>
                                                        <lightning-input 
                                                            label="PO"
                                                            type="text" 
                                                            required 
                                                            class="po validValue"></lightning-input>
                                                            <!--<template if:true={paPrice}>
                                                                <lightning-input 
                                                                    label="Price Agreement Price"
                                                                    type="currency"
                                                                    onchange={onPaPriceChange} 
                                                                    required 
                                                                    class="pa"></lightning-input>
                                                            </template>-->
                                                    </div>
                        
                                                    <div class="slds-col">
                                                        <lightning-input 
                                                            label="Installed Qty" 
                                                            type="number"
                                                            onchange={handleManualValueChange}
                                                            
                                                            required 
                                                            class="miq validValue"></lightning-input>
                                                        <lightning-input 
                                                            label="No. of Products Failed"
                                                            type="number"
                                                            onchange={handleManualFailedValueChange}
                                                            
                                                            required 
                                                            class="mnf validValue"></lightning-input>
                                                            <!--<lightning-input 
                                                            label="No. of Hours Used"
                                                            type="number" 
                                                            required 
                                                            class="hu validValue"></lightning-input>
                                                            <lightning-input 
                                                            label="Hours Per Start"
                                                            type="number" 
                                                            required 
                                                            class="hs validValue"></lightning-input>-->
                        
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                    
                                            <div class="slds-box"> <!-- BOX 3 LOWER-->
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col">
                                                        
                                                        <lightning-textarea 
                                                            name="comments" 
                                                            label="Comments" 
                                                            placeholder="type here..."
                                                            class="cm"></lightning-textarea>
                                                        
                                                        <br>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                    
                                    <!-- modal footer start-->
                                    <footer class="slds-modal__footer">
                                        <div class="slds-align_absolute-center">
                                            <div style="text-align:center;">
                                                <lightning-button variant="brand-outline"
                                                        label="Close"
                                                        title="Close"
                                                        onclick={closeNoCatModal}>
                                                    </lightning-button>
                                                <lightning-button class="slds-m-top_small slds-p-left_x-small"
                                                        variant="brand"
                                                        onclick={handleManualSave}
                                                        label={addLabel}>
                                                    </lightning-button>
                                            
                                            </div>
                                        </div>
                                    
                                    </footer>
                                </div>
                                </section>
                                <div class="slds-backdrop slds-backdrop_open"></div>
                               
                            </template>
                            <!--END ADD PRODUCT MANUALLY MODAL-->
                        
                        
                             <!--EDIT PRODUCT MANUALLY MODAL-->
                                <!-- MODAL FOR EDITING PRODUCTS -->
                                <template if:true={editProductModal}>
                                    <section role="dialog" tabindex="-1"
                                            aria-labelledby="modal-heading-01"
                                            aria-modal="true"
                                            aria-describedby="modal-content-id-1"
                                            class="slds-modal slds-fade-in-open">
                                    <div class="slds-modal__container">
                                        <!-- modal header -->
                                        <header class="slds-modal__header">
                                            <!--<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                                                <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                                            </button>-->
                                            <h2 id="modal-heading-06" class="slds-text-heading_medium slds-hyphenate">Update Item</h2>
                                            <p class="error">{errorMessage}</p>
                                        </header>
                                        <!-- modal body -->
                                    
                                        
                                        <!-- showing record edit form -->
                                        <div if:true={isEditForm} class="slds-theme_default">
                                            <lightning-record-edit-form layout-type="Full" record-id={currentRecordId} draft-values={draftValues} object-api-name="Return_Order_Item__c" onload={handleManualLoad} >
                                        <lightning-messages></lightning-messages>
                                        <div class="slds-modal__content slds-p-around_medium">
                                            <div class="slds-box"> <!-- BOX 1 UPPER-->
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col">
                                                        <h4><lightning-helptext content="Content for Text"></lightning-helptext></h4>
                                                        <lightning-input
                                                            label="NoCAT Input"
                                                            type="toggle"
                                                            message-toggle-active = ''
                                                            message-toggle-inactive = ''
                                                            onchange={handleNoCatChecked}
                                                            class="nci"
                                                            field-level-help="Enter required information"
                                                        ></lightning-input>
                                                        <div if:false={noCatInput}>
                                                            <c-material-lookup-l-w-c object-name="GE_LGT_EM_MaterialMaster__c" field-name="GE_LGT_EM_MaterialDescription__c" label="CAT#" placeholder="Search..." icon-name="standard:products" onselected={handleMaterialSelected} class="mat"></c-material-lookup-l-w-c> 
                                                            <!--<c-lookup-l-w-c unique-key="Id" obj-name="GE_LGT_EM_MaterialMaster__c" icon-name="standard:products" label-name="Material Master"
                                                                display-fields="GE_LGT_EM_SAP_MaterialNumber__c, GE_LGT_EM_MaterialDescription__c" display-format="GE_LGT_EM_SAP_MaterialNumber__c - GE_LGT_EM_MaterialDescription__c"
                                                                onvalueselect={handleSelection} placeholder="Search" value-id="" create-record="false"  class="custom-lookup">
                                                            </c-lookup-l-w-c>-->
                                                            <!--<div class="slds-box">
                                                                Selected Material ID: {materialDescription}
                                                                
                                                            </div> -->
                                                        </div>
                                                        <div if:true={noCatInput}>
                                                            <lightning-input
                                                                label="NoCAT #"
                                                                type="text"
                                                                value={NoCAT}
                                                                class="nc"
                                                                onchange={onNoCatChange}
                                                            ></lightning-input>
                                                        </div>
                                                    </div>
                                                    <div class="slds-col">
                                                        <lightning-combobox
                                                            name="action"
                                                            label="Requested Action - Line Item Override"
                                                            placeholder="Select Action"
                                                            options={RAoptions}
                                                            value={reqAction}
                                                            onchange={handleRAction}
                                                            class="ra"></lightning-combobox>
                                                        <lightning-combobox
                                                            name="progress"
                                                            label="Warranty Code - Line Item Override"
                                                            value={warCode}
                                                            placeholder="Select Warranty Code"
                                                            options={warOptions}
                                                            onchange={handlePick}
                                                            class="wc"></lightning-combobox>
                                                        <lightning-combobox
                                                            name="progress"
                                                            label="Warranty Sub Code - Line Item Override"
                                                            value={warSubCode}
                                                            placeholder="Select Warranty Sub Code"
                                                            options={warSubOptions}
                                                            class="wsc"></lightning-combobox>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                                            <div class="slds-box"> <!-- BOX 2 LOWER-->
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col">
                                                        <lightning-input 
                                                            label="Shipment Date"
                                                            value={shipmentDate}
                                                            type="date"
                                                            date-style="short"
                                                            required 
                                                            class="sd"></lightning-input>
                                                        <lightning-input 
                                                            label="Date Installed"
                                                            value={dateInstalled}
                                                            type="date"
                                                            date-style="short" 
                                                            required 
                                                            class="di validValue"></lightning-input>
                                                        <lightning-input 
                                                            label="PO"
                                                            value={PO}
                                                            type="text" 
                                                            required 
                                                            class="po validValue"></lightning-input>
                                                            <!--<template if:true={paPrice}>
                                                                <lightning-input 
                                                                    label="Price Agreement Price"
                                                                    value={priceAgrmtPrice}
                                                                    onchange={onPaPriceChange} 
                                                                    type="currency" 
                                                                    required 
                                                                    class="pa"></lightning-input>
                                                            </template>-->
                                                    </div>
                        
                                                    <div class="slds-col">
                                                        <lightning-input 
                                                            label="Installed Qty" 
                                                            value={numInstalled}
                                                            onchange={handleFieldChange}
                                                            type="number"
                                                            required 
                                                            class="iq validValue"></lightning-input>
                                                        <lightning-input 
                                                            label="No. of Products Failed"
                                                            value={numFailed}
                                                            onchange={handleFailedFieldChange}
                                                            type="number" 
                                                            required 
                                                            class="nf validValue"></lightning-input>
                                                            <!--<lightning-input 
                                                            label="No. of Hours Used"
                                                            value={hoursUsed}
                                                            type="number" 
                                                            required 
                                                            class="hu validValue"></lightning-input>
                                                            <lightning-input 
                                                            label="Hours Per Start"
                                                            value={hoursPerStart}
                                                            type="number" 
                                                            required 
                                                            class="hs validValue"></lightning-input>-->
                        
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                    
                                            <div class="slds-box"> <!-- BOX 3 LOWER-->
                                                <div class="slds-grid slds-gutters">
                                                    <div class="slds-col">
                                                        
                                                        <lightning-textarea 
                                                            name="comments" 
                                                            value={comments}
                                                            label="Comments" 
                                                            placeholder="type here..."
                                                            class="cm"></lightning-textarea>
                                                        
                                                        <br>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                        </lightning-record-edit-form>
                                        </div>
                                        
                                        <!-- modal footer start-->
                                        <footer class="slds-modal__footer">
                                            <div class="slds-align_absolute-center">
                                                <div style="text-align:center;">
                                                    <lightning-button variant="brand-outline"
                                                        label="Close"
                                                        title="Close"
                                                        onclick={closeEditModal}>
                                                    </lightning-button>
                                                    <lightning-button class="slds-m-top_small slds-p-left_x-small"
                                                        variant="brand"
                                                        type="submit"
                                                        onclick={handleSaveForm}
                                                        label={editLabel}>
                                                    </lightning-button>
                                                </div>
                                            </div>
                                        
                                        </footer>
                                    </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                
                                </template>
                            <!--END EDIT PRODUCT MANUALLY MODAL-->
                    
                      
</template>